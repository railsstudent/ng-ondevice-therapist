<div class="p-4 bg-gray-800 border-t border-gray-700">
  <form (ngSubmit)="handleSendPrompt()" class="flex items-center gap-3">
    <textarea
      [(ngModel)]="prompt"
      name="prompt"
      rows="3"
      placeholder="e.g., make the sky purple"
      (keydown.enter)="handleSendPrompt()"
      class="flex-grow bg-gray-700 text-gray-200 border border-gray-600 rounded-xl py-3 px-5 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-200 resize-none placeholder-gray-400"
      [disabled]="pauseSendPrompt()"></textarea>

    {{ isRecording() }}
    <button
        type="submit"
        [disabled]="pauseSendPrompt() || !trimmedPrompt"
        (click)="recordAudio()"
        class="flex-shrink-0 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full p-3 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500">
        @if (isRecording()) {
          <app-stop-icon />
        } @else {
          <app-recording-icon />
        }
    </button>

    <button
      type="submit"
      [disabled]="pauseSendPrompt() || !trimmedPrompt"
      class="flex-shrink-0 bg-indigo-600 hover:bg-indigo-700 text-white rounded-full p-3 disabled:bg-indigo-400 disabled:cursor-not-allowed transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-indigo-500">
      @if (isGeneratingImage()) {
        <app-spinner-icon />
      } @else {
        <app-send-icon />
      }
    </button>
  </form>
</div>
